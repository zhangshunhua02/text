<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>报饭语音</title>
    <script src="./js/jQ.js"></script>
</head>

<body>
    <input type="text" value="">

    <audio src="./aio/1.mp3" controls="controls" preload id="music" hidden></audio>

    
    <span onclick="control();">播放/暂停</span>
    <span onclick="repeat();">重播</span>
</body>
<script>
    //用于监听input的值变化（input的值产生变化才会触发事件）
    (function ($) {
        $.fn.watch = function (callback) {
            return this.each(function () {
                //缓存以前的值  
                $.data(this, 'originVal', $(this).val());
                //event  
                $(this).on('keyup paste', function () {
                    var originVal = $.data(this, 'originVal');
                    var currentVal = $(this).val();

                    if (originVal !== currentVal) {
                        $.data(this, 'originVal', $(this).val());
                        callback(currentVal);
                    }
                });
            });
        }
    })(jQuery);
    $("input:text").watch(function (value) {
        if (value.length >= 3) {
            $("input").val("")
            var audio = document.getElementById('music');
            if (audio !== null) {
                if (audio.paused) {
                    audio.play();// 播放
                } else {
                    audio.pause();// 暂停
                }
            }
        }

    });

    // function repeat() {
    //     var audio = document.getElementById('music');
    //     audio.currentTime = 0;//重新播放
    // }
    function control() {
        var audio = document.getElementById('music');
        if (audio !== null) {
            if (audio.paused) {
                audio.play();// 播放
            } else {
                audio.pause();// 暂停
            }
        }
    }
  






</script>

</html>